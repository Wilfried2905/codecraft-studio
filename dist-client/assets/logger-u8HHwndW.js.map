{"version":3,"file":"logger-u8HHwndW.js","sources":["../../src/services/logger.ts"],"sourcesContent":["/**\n * Logger - Système de logging central pour suivre l'exécution des agents\n */\n\nexport type LogLevel = 'info' | 'warn' | 'error' | 'success' | 'debug'\n\nexport interface Log {\n  id: string\n  level: LogLevel\n  message: string\n  timestamp: number\n  data?: any\n  agentId?: string\n  agentName?: string\n  duration?: number\n}\n\nexport class Logger {\n  private static instance: Logger\n  private logs: Log[] = []\n  private listeners: ((log: Log) => void)[] = []\n\n  private constructor() {}\n\n  static getInstance(): Logger {\n    if (!Logger.instance) {\n      Logger.instance = new Logger()\n    }\n    return Logger.instance\n  }\n\n  /**\n   * Ajoute un listener qui sera appelé à chaque nouveau log\n   */\n  addListener(listener: (log: Log) => void) {\n    this.listeners.push(listener)\n  }\n\n  /**\n   * Retire un listener\n   */\n  removeListener(listener: (log: Log) => void) {\n    this.listeners = this.listeners.filter(l => l !== listener)\n  }\n\n  /**\n   * Log un message\n   */\n  log(level: LogLevel, message: string, data?: any) {\n    const log: Log = {\n      id: `log-${Date.now()}-${Math.random().toString(36).substring(7)}`,\n      level,\n      message,\n      timestamp: Date.now(),\n      data\n    }\n\n    this.logs.push(log)\n    \n    // Notifier tous les listeners\n    this.listeners.forEach(listener => listener(log))\n\n    // Log aussi dans la console\n    const consoleMethod = level === 'error' ? 'error' : level === 'warn' ? 'warn' : 'log'\n    console[consoleMethod](`[${level.toUpperCase()}] ${message}`, data)\n  }\n\n  /**\n   * Log spécifique pour un agent\n   */\n  logAgent(agentId: string, agentName: string, message: string, data?: any, duration?: number) {\n    const log: Log = {\n      id: `log-${Date.now()}-${Math.random().toString(36).substring(7)}`,\n      level: 'info',\n      message,\n      timestamp: Date.now(),\n      agentId,\n      agentName,\n      data,\n      duration\n    }\n\n    this.logs.push(log)\n    this.listeners.forEach(listener => listener(log))\n    \n    console.log(`[AGENT:${agentName}] ${message}`, data)\n  }\n\n  /**\n   * Shortcuts\n   */\n  info(message: string, data?: any) {\n    this.log('info', message, data)\n  }\n\n  warn(message: string, data?: any) {\n    this.log('warn', message, data)\n  }\n\n  error(message: string, data?: any) {\n    this.log('error', message, data)\n  }\n\n  success(message: string, data?: any) {\n    this.log('success', message, data)\n  }\n\n  debug(message: string, data?: any) {\n    this.log('debug', message, data)\n  }\n\n  /**\n   * Récupère tous les logs\n   */\n  getLogs(): Log[] {\n    return [...this.logs]\n  }\n\n  /**\n   * Récupère les logs d'un agent spécifique\n   */\n  getAgentLogs(agentId: string): Log[] {\n    return this.logs.filter(log => log.agentId === agentId)\n  }\n\n  /**\n   * Efface tous les logs\n   */\n  clear() {\n    this.logs = []\n    this.info('Logs cleared')\n  }\n\n  /**\n   * Exporte les logs en JSON\n   */\n  export(): string {\n    return JSON.stringify(this.logs, null, 2)\n  }\n}\n\n// Export singleton instance\nexport const logger = Logger.getInstance()\n"],"names":["_Logger","__publicField","listener","l","level","message","data","log","agentId","agentName","duration","Logger","logger"],"mappings":"oKAiBO,MAAMA,EAAN,MAAMA,CAAO,CAKV,aAAc,CAHdC,EAAA,YAAc,CAAA,GACdA,EAAA,iBAAoC,CAAA,EAErB,CAEvB,OAAO,aAAsB,CAC3B,OAAKD,EAAO,WACVA,EAAO,SAAW,IAAIA,GAEjBA,EAAO,QAChB,CAKA,YAAYE,EAA8B,CACxC,KAAK,UAAU,KAAKA,CAAQ,CAC9B,CAKA,eAAeA,EAA8B,CAC3C,KAAK,UAAY,KAAK,UAAU,OAAOC,GAAKA,IAAMD,CAAQ,CAC5D,CAKA,IAAIE,EAAiBC,EAAiBC,EAAY,CAChD,MAAMC,EAAW,CACf,GAAI,OAAO,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,CAAC,CAAC,GAChE,MAAAH,EACA,QAAAC,EACA,UAAW,KAAK,IAAA,EAChB,KAAAC,CAAA,EAGF,KAAK,KAAK,KAAKC,CAAG,EAGlB,KAAK,UAAU,QAAQL,GAAYA,EAASK,CAAG,CAAC,EAIhD,QADsBH,IAAU,QAAU,QAAUA,IAAU,OAAS,OAAS,KAC3D,EAAE,IAAIA,EAAM,aAAa,KAAKC,CAAO,GAAIC,CAAI,CACpE,CAKA,SAASE,EAAiBC,EAAmBJ,EAAiBC,EAAYI,EAAmB,CAC3F,MAAMH,EAAW,CACf,GAAI,OAAO,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,CAAC,CAAC,GAChE,MAAO,OACP,QAAAF,EACA,UAAW,KAAK,IAAA,EAChB,QAAAG,EACA,UAAAC,EACA,KAAAH,EACA,SAAAI,CAAA,EAGF,KAAK,KAAK,KAAKH,CAAG,EAClB,KAAK,UAAU,QAAQL,GAAYA,EAASK,CAAG,CAAC,EAEhD,QAAQ,IAAI,UAAUE,CAAS,KAAKJ,CAAO,GAAIC,CAAI,CACrD,CAKA,KAAKD,EAAiBC,EAAY,CAChC,KAAK,IAAI,OAAQD,EAASC,CAAI,CAChC,CAEA,KAAKD,EAAiBC,EAAY,CAChC,KAAK,IAAI,OAAQD,EAASC,CAAI,CAChC,CAEA,MAAMD,EAAiBC,EAAY,CACjC,KAAK,IAAI,QAASD,EAASC,CAAI,CACjC,CAEA,QAAQD,EAAiBC,EAAY,CACnC,KAAK,IAAI,UAAWD,EAASC,CAAI,CACnC,CAEA,MAAMD,EAAiBC,EAAY,CACjC,KAAK,IAAI,QAASD,EAASC,CAAI,CACjC,CAKA,SAAiB,CACf,MAAO,CAAC,GAAG,KAAK,IAAI,CACtB,CAKA,aAAaE,EAAwB,CACnC,OAAO,KAAK,KAAK,OAAOD,GAAOA,EAAI,UAAYC,CAAO,CACxD,CAKA,OAAQ,CACN,KAAK,KAAO,CAAA,EACZ,KAAK,KAAK,cAAc,CAC1B,CAKA,QAAiB,CACf,OAAO,KAAK,UAAU,KAAK,KAAM,KAAM,CAAC,CAC1C,CACF,EAzHEP,EADWD,EACI,YADV,IAAMW,EAANX,EA6HA,MAAMY,EAASD,EAAO,YAAA"}